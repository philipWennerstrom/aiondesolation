/**
 * This file is part of Aion-Lightning <aion-lightning.org>.
 *
 *  Aion-Lightning is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  Aion-Lightning is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details. *
 *  You should have received a copy of the GNU General Public License
 *  along with Aion-Lightning.
 *  If not, see <http://www.gnu.org/licenses/>.
 */
package com.aionemu.gameserver.network.aion.serverpackets;

import com.aionemu.gameserver.network.aion.AionConnection;
import com.aionemu.gameserver.network.aion.AionServerPacket;

/**
 * @author -Nemesiss-
 */
public class SM_L2AUTH_LOGIN_CHECK extends AionServerPacket {

    /**
     * True if client is authed.
     */
    private final boolean ok;
    private final String accountName;
    private static byte[] data;

    static {
        data = hex2Byte("000000000000000101010202020303030404040505050606060707070808080909090A0A0A0B0B0B0C0C0C0D0"
				+ "D0D0E0E0E0F0F0F1010101111111212121313131414141515151616161717171818181919191A1A1A1B1B1B1C1C1C1D1D1D1"
				+ "E1E1E1F1F1F2020202121212222222323232424242525252626262727272828282929292A2A2A2B2B2B2C2C2C2D2D2D2E2E2"
				+ "E2F2F2F3030303131313232323333333434343535353636363737373838383939393A3A3A3B3B3B3C3C3C000000000000000"
				+ "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
				+ "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
				+ "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
				+ "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010"
				+ "202020303030404040505050606060707070808080909090A0A0A0B0B0B0C0C0C0D0D0D0E0E0E0F0F0F10101011111112121"
				+ "21313131414141515151616161717171818181919191A1A1A1B1B1B1C1C1C1D1D1D1E1E1E1F1F1F202020212121222222232"
				+ "3232424242525252626262727272828282929292A2A2A2B2B2B2C2C2C2D2D2D2E2E2E2F2F2F3030303131313232323333333"
				+ "434343535353636363737373838383939393A3A3A3B3B3B3C3C3C0000000000000000009E0010ABD71701001062580801008"
				+ "046280701001004C1070100F0888F060100103527070100205C2707010010161D0D050030641D0D0300203D1D0D010050B21"
				+ "D0D0100408B1D0D010070001E0D010080271E0D0100904E1E0D0A0010B9FE1E0100B096A635010090E4512A01009011832B0"
				+ "100107BEA2A01002075B9290100104EB9290100B050E31100003018E2110000304513130000406C13130000B0AE7A120000C"
				+ "0D57A12000010CAE111000010F712130000201E13130000E0F21413000090607A120000A0877A120000400E7C12000060FEE"
				+ "4110000C0CAEA110000608DE21100009002E311000080DBE2110000E0C5E3110000E0DCF41100002079F5110000C077E3110"
				+ "000C08EF4110000002BF5110000D09EE3110000D0B5F41100001052F51100005066E211000070B4E2110000E036E61100007"
				+ "007EA11000030FAE6110000A00BE81100004021E7110000B032E81100000085E6110000D080E81100009055EA110000E06BF"
				+ "21100004056F311000080F2F3110000103BE41100007025E5110000902F14130000C0A41413000060BA13130000D0CB14130"
				+ "000509313130000802EEA110000A05614130000800814130000B07D14130000F0191513000050D7E4110000C059E81100007"
				+ "0ADF81100003089E41100009073E5110000A040F4110000807EC423010000BAF211000000727B120000F003F51100006015F"
				+ "611000060E0E911000000F6E8110000D0E4A635010030A0F5110000B0A3EA11000040C7F51100009019F41100002008F3110"
				+ "000A0B1F6110000B067F4110000908AF6110000F092F21100008063F611000050EEF51100006086F8110000403FE2110000E"
				+ "0237B120000F04A7B12000030E77B120000D0FC7A12000010997B12000020C07B12000040B0E4110000D0F1EA11000000D8E"
				+ "D110000B0D8F611000080D4F8110000A029E3110000E0A7E811000070E113130000804CE5110000C0FFF61100000014E4110"
				+ "000F0ECE311000020F1E1110000306BE91100004092E9110000F03FEB110000706BA8350100501DA83501006051EC1100001"
				+ "0E1F2110000C0E8E5110000E018EB110000909E8E060100A0C58E060100A0CCC423010090A5C4230100A0751E0D010010B88"
				+ "50C0100907F840C0500B0CD840C0300A0A6840C0100E042850C0100C0F4840C0100D01B850C0100F069850C01000091850C0"
				+ "A009022661E01006044A83501002037A5350A00F032A7350100A06FA6350100C0BDA63501001081A7350100E00BA7350100D"
				+ "00FE6110000305EA535050020A8A735010030CFA735010040F6A7350100106DC3230100");
    }

    /**
     * Constructs new <tt>SM_L2AUTH_LOGIN_CHECK </tt> packet
     *
     * @param ok
     */
    public SM_L2AUTH_LOGIN_CHECK(boolean ok, String accountName) {
        this.ok = ok;
        this.accountName = accountName;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void writeImpl(AionConnection con) {
    	writeD(ok ? 0x00 : 0x01);
        writeB(data);
        writeS(accountName);
    }

    private static byte[] hex2Byte(String str) {
        byte[] bytes = new byte[str.length() / 2];
        for (int i = 0; i < bytes.length; i++) {
            bytes[i] = (byte) Integer.parseInt(str.substring(2 * i, 2 * i + 2), 16);
        }
        return bytes;
    }
}
